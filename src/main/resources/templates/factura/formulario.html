<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <h2>Registro de factura</h2>
        <br>
        <form th:action="@{/factura/procesaFormulario}" th:object="${facturaydetalle}" method="post">
            <div class="form-group row">
                <label class="col-sm-2">Fecha:</label>
                <input type="date" th:field="*{fecha}" class="col-sm-2">
            </div>
            <div>
                <label class="col-sm-2">Observacion:</label>
                <input type="text" th:field="*{Observaciones}" class="col-sm-2">
            </div>
            <div class="form-group row">
                <label  class="col-sm-2">Clinete:</label>
                <select  class="col-sm-2" id="clienteId" th:field="*{clienteId}">

                    <option th:each="cliente : ${clientes}" th:text="${cliente.nombre}"
                        th:value="${cliente.clienteId}"></option>
                </select>
            </div>
            <div class="form-group row">
                <label  class="col-sm-2">Producto:</label>
                <select  class="col-sm-2" id="productoId" th:field="*{productoId}">

                    <option th:each="producto : ${productos}" th:text="${producto.nombre} + ' - ' + ${producto.cantidadProductosNecesarios}"
                        th:value="${producto.productoId}"></option>
                </select>
            </div>
            <div class="form-group row">
                <label  class="col-sm-2">Cantidad de productos recibidos:</label>
                <input type="text" th:field="*{cantidadProductosRecibidos}" class="col-sm-2">
            </div>
            <div>
                <button type="submit" class="btn btn-primary" name="button" value="agregar">Agregar</button>
            </div>

            <table class="table">
                <tr>
                    <th>Estudiante</th>
                    <th>Instituto</th>
                    <th>Cantidad prod. necesarios</th>
                    <th>Cantidad prod. entregados</th>
                    <th>Eliminar</th>
                </tr>
                <tr th:each=" factura : ${tablaFactura.entrySet()}">
                    <td th:text="${factura.value[0]}"></td>
                    <td th:text="${factura.value[1]}"></td>
                    <td th:text="${factura.value[2]}"></td>
                    <td th:text="${factura.value[3]}"></td>
                    <td>
                        <button type="submit" class="btn btn-danger" name="button" value="eliminar">Eliminar</button>
                    </td>
                </tr>
            </table>
            
            <button type="submit" class="btn btn-secondary" name="button" value="facturar">Facturar</button>

            <input type="hidden" th:field="*{facturaId}">
        </form>
    </div>
</body>

</html>